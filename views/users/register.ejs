<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
  <body class="enterForm-body">
    <main class="enterForm-mainBox">
      <div class="logo mb-4">
        <a class="title text-uppercase" href="/">
          <img
            src="/img/logo2.svg"
            alt="Astronaut and spaceship"
            width="30"
            height="24"
            class="d-inline-block align-text-top"
          />
        Astronauts</a>
      </div>
      <h1 class="mb-4">Register and start recording your astronauts.</h1>
      <%- include('../partials/flash') %>
      <form class="validated-form" action="/register" method="POST" novalidate>
        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input type="text" class="form-control <%= errors.find(e =>
          e.param === "user.username") ? "is-invalid" : "" %>" id="username" aria-describedby="usernameHelp" name="user[username]" placeholder="Enter your username" value="<%= username ? username : "" %>" required>
          <div class="invalid-feedback">
            <% if(errors.find(error => error.param === "user.username")) { %>
              <p><%= errors.filter(error => error.param === 'user.username')[0].msg %> </p>
            <% } else { %>  
            Please choose a username.
            <% } %> 
          </div>
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input type="email" class="form-control <%= errors.find(e =>
          e.param === "user.email") ? "is-invalid" : "" %>" id="email" aria-describedby="emailHelp" placeholder="Enter your email"
          name="user[email]"
          value="<%= email ? email : "" %>" 
          required>
          <div class="invalid-feedback">
            <% if(errors.find(error => error.param === "user.email")) { %>
              <%= errors.filter(error => error.param === 'user.email')[0].msg %>
            <% } else { %>
              Please enter email in valid format.
            <% } %> 
          </div>
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password" class="form-control <%= errors.find(e =>
          e.param === "user.password") ? "is-invalid" : "" %>" id="password" placeholder="Enter your password"
          name="user[password]"
          required>
          <div class="invalid-feedback">
            <% if(errors.find(error => error.param === "user.password")) { %>
              <%= errors.filter(error => error.param === 'user.password')[0].msg %>
            <% } %>  
          </div>
        </div>

        <div class="mb-3">
          <label for="passwordConfirmation" class="form-label">Password confirmation</label>
          <input type="password" class="form-control <%= errors.find(e =>
          e.param === "user.passwordConfirmation") ? "is-invalid" : "" %>" id="passwordConfirmation" placeholder="Enter your password again"
          name="user[passwordConfirmation]"
          required>
          <div class="invalid-feedback">
            <% if(errors.find(error => error.param === "user.passwordConfirmation")) { %>
              <%= errors.filter(error => error.param === 'user.passwordConfirmation')[0].msg %>
            <% } %>  
          </div>
        </div>

        <button type="submit" class="btn btn-dark w-100">Submit</button>
      </form>
    </main>
    <script src="/js/validateForm.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
      crossorigin="anonymous"
    ></script>
  </body>
</html>


